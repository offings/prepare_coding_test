## 백준 14391 종이 조각
[문제 링크](https://www.acmicpc.net/problem/14391)

## 문제
영선이는 숫자가 쓰여 있는 직사각형 종이를 가지고 있다. 종이는 1×1 크기의 정사각형 칸으로 나누어져 있고, 숫자는 각 칸에 하나씩 쓰여 있다. 행은 위에서부터 아래까지 번호가 매겨져 있고, 열은 왼쪽부터 오른쪽까지 번호가 매겨져 있다.

영선이는 직사각형을 겹치지 않는 조각으로 자르려고 한다. 각 조각은 크기가 세로나 가로 크기가 1인 직사각형 모양이다. 길이가 N인 조각은 N자리 수로 나타낼 수 있다. 가로 조각은 왼쪽부터 오른쪽까지 수를 이어 붙인 것이고, 세로 조각은 위에서부터 아래까지 수를 이어붙인 것이다.

아래 그림은 4×4 크기의 종이를 자른 한 가지 방법이다.

![image](./image.png)

각 조각의 합은 493 + 7160 + 23 + 58 + 9 + 45 + 91 = 7879 이다.

종이를 적절히 잘라서 조각의 합을 최대로 하는 프로그램을 작성하시오.

## 핵심 포인트
```
- 비트 마스킹의 원리를 이용하여 가능한 모든 경우에 대해서 모두 탐색한다. 한 칸은 가로 혹은 세로로 이어질 수 있기 때문에 총 경우의 수는 2 ** 16가지이다.
- 비트 마스킹의 예로 1 << n은 2의 n제곱과 같은 식이다.
- 전체 칸을 가로로 자른 칸과 세로로 자른 칸으로 나눠 조각의 합을 계산한다.
- 만약 현재 경우의 수가 15라면 2진수로 표현하면 1111이 된다. 즉, 아래의 알고리즘에 따르면 네 칸 모두 세로로 이어 잘랐다는 것을 의미한다.
```

## 핵심 코드
```
def bit_masking():
    global answer
    # 모든 가능한 경우의 수
    for i in range(1 << n * m):
        total = 0

        for r in range(n):
            row_sum = 0
            for c in range(m):
                # 현재 칸의 위치를 의미
                # 전체 칸을 일렬로 세웠을 때 인덱스의 위치
                idx = r * m + c
                # 현재 경우의 수를 2진수로 표현했을 때
                # 1로 표현되는 칸은 가로로 이어진 것을 뜻함
                if i & (1 << idx) != 0:
                    row_sum = row_sum * 10 + p[r][c]
                # 현재 칸이 세로로 이어진 경우는
                # 누적된 값을 total에 저장 후 초기화
                else:
                    total += row_sum
                    row_sum = 0
            
            # 각 행마다 값 누적
            total += row_sum

        for c in range(m):
            col_sum = 0
            for r in range(n):
                idx = r * m + c
                # 현재 경우의 수를 2진수로 표현했을 때
                # 1로 표현되는 칸은 세로로 이어진 것을 뜻함
                if i & (1 << idx) == 0:
                    col_sum = col_sum * 10 + p[r][c]
                # 현재 칸이 가로로 이어진 경우는
                # 누적된 값을 total에 저장 후 초기화
                else:
                    total += col_sum
                    col_sum = 0
            # 각 열마다 값 누적
            total += col_sum

        # 조각의 합이 최대가 되면 값을 변경
        answer = max(answer, total)
```
